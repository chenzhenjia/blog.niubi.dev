<!doctype html><html lang=zh-CN><head><meta name=generator content="Hugo 0.145.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>陈</title><meta name=Description content="陈"><meta property="og:url" content="https://blog.niubi.dev/">
<meta property="og:site_name" content="陈"><meta property="og:title" content="陈"><meta property="og:description" content="陈"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="陈"><meta name=twitter:description content="陈"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.niubi.dev/><link rel=alternate href=/index.xml type=application/rss+xml title=陈><link rel=feed href=/index.xml type=application/rss+xml title=陈><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/blog.niubi.dev\/","inLanguage":"zh-CN","author":{"@type":"Person","name":"陈"},"description":"陈","name":"陈"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=陈>陈</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=陈>陈</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class="page home" data-home=posts><div class=home-profile><div class=links></div></div><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/k8s%E5%AE%89%E8%A3%85ingress-nginx%E5%90%8E%E4%BB%A3%E7%90%86kubernetes-dashboard/>k8s 安装ingress-nginx后代理kubernetes-dashboard</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>陈</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2018-04-30>2018-04-30</time></span></div><div class=content><h1 id=准备>准备</h1><ol><li>k8s 集群，版本为1.9.5</li><li>kubernetes-dashboard 为 v1.8.3</li></ol><h2 id=安装-kubernetes-dashboard>安装 kubernetes-dashboard</h2><ol><li><p>直接使用官方的命令安装</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml</span></span></code></pre></div></div></li><li><p>暴露端口，以便访问，用完之后改回</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl -n kube-system edit service kubernetes-dashboard</span></span></code></pre></div></div><p>按 i 进入插入模式
修改 type 值 ClusterIP 为NodePort
然后按 esc ，再按 x 回车保存</p></li><li><p>查看端口</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl -n kube-system get service kubernetes-dashboard</span></span></code></pre></div></div><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                   CLUSTER-IP       EXTERNAL-IP   PORT<span class=o>(</span>S<span class=o>)</span>        AGE
</span></span><span class=line><span class=cl>kubernetes-dashboard   10.100.124.90   &lt;nodes&gt;       443:31707/TCP   21h</span></span></code></pre></div></div><p>其中 31707就是外部可以访问的 ip</p></div><div class=post-footer><a href=/posts/k8s%E5%AE%89%E8%A3%85ingress-nginx%E5%90%8E%E4%BB%A3%E7%90%86kubernetes-dashboard/>阅读全文</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/%E5%9C%A8coreos%E4%B8%8A%E9%83%A8%E7%BD%B2convoy-docker%E6%8F%92%E4%BB%B6/>在 coreos 上部署 Convoy docker 插件</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>陈</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2018-03-16>2018-03-16</time></span></div><div class=content><h2 id=前言>前言</h2><ul><li>docker swarm 需要共享数据</li><li>coreos 相对其他 Linux 系统部署 nfs 的资料少</li></ul><h2 id=首先在-coreos-启用-nfs-参考>首先在 coreos 启用 nfs 参考</h2><ol><li><p>创建文件夹用来开启 nfs
<code>mkdir /mnt/nfs</code></p></li><li><p>编辑 nfs 的 配置文件</p><p><code>vim /etc/exports</code></p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-text"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>/mnt/nfs  127.0.0.1(rw,sync,no_subtree_check,no_root_squash)</span></span></code></pre></div></div></li><li><p>在 coreos 启用 nfs 服务
<code>systemctl enable nfs</code></p></li></ol><blockquote><p>nfs 服务只需要在一台服务器上启动就可以，其它服务器只需要挂载</p></blockquote><h2 id=安装-convoy-参考>安装 convoy 参考</h2><ol><li><p>下载安装</p></div><div class=post-footer><a href=/posts/%E5%9C%A8coreos%E4%B8%8A%E9%83%A8%E7%BD%B2convoy-docker%E6%8F%92%E4%BB%B6/>阅读全文</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/springsecurity%E9%85%8D%E7%BD%AEignoring%E4%B8%8D%E7%94%9F%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/>Spring Security 配置 ignoring 不生效的问题</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>陈</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-12-04>2017-12-04</time></span></div><div class=content><h2 id=遇到的问题>遇到的问题</h2><p>给 Spring Security 加上了一个 filter，配置了 ignoring 但是，filter 还是会拦截到 ignoring 的路径，导致 ignoring 不生效。</p><h2 id=问题代码>问题代码</h2><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-java"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>InjectResourceSecurityFilter</span><span class=w> </span><span class=nf>mySecurityFilter</span><span class=p>()</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>InjectResourceSecurityFilter</span><span class=p>(</span><span class=n>securityMetadataSource</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>accessDecisionManager</span><span class=p>,</span><span class=w> </span><span class=n>authenticationManagerBean</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>protected</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>configure</span><span class=p>(</span><span class=n>HttpSecurity</span><span class=w> </span><span class=n>http</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>http</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>addFilterBefore</span><span class=p>(</span><span class=n>mySecurityFilter</span><span class=p>(),</span><span class=w> </span><span class=n>InjectResourceSecurityFilter</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>authorizeRequests</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>antMatchers</span><span class=p>(</span><span class=s>&#34;/static/**&#34;</span><span class=p>).</span><span class=na>permitAll</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>antMatchers</span><span class=p>(</span><span class=s>&#34;/index.html&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;/&#34;</span><span class=p>).</span><span class=na>permitAll</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>anyRequest</span><span class=p>().</span><span class=na>authenticated</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>and</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>csrf</span><span class=p>().</span><span class=na>disable</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>configure</span><span class=p>(</span><span class=n>WebSecurity</span><span class=w> </span><span class=n>web</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>super</span><span class=p>.</span><span class=na>configure</span><span class=p>(</span><span class=n>web</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>web</span><span class=p>.</span><span class=na>ignoring</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>antMatchers</span><span class=p>(</span><span class=s>&#34;/static/**&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;/index.html&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=s>&#34;/favicon.ico&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;/&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></div><h2 id=解决问题>解决问题</h2><p>通过 Google 找到在 stackoverflow上的一个回答 stackoverflow
上说去掉 filter 上的 <code>Component</code> 注解就好，由于我在这里写的是 <code>@Bean</code>，所以把<code>@Bean</code> 给去掉，解决 ignoring 不生效的问题。</p></div><div class=post-footer><a href=/posts/springsecurity%E9%85%8D%E7%BD%AEignoring%E4%B8%8D%E7%94%9F%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/>阅读全文</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/%E4%BD%BF%E7%94%A8kubespray%E9%83%A8%E7%BD%B2kubernetes%E9%9B%86%E7%BE%A4/>使用kubespray部署kubernetes集群</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>陈</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-11-28>2017-11-28</time></span></div><div class=content><h2 id=准备工作>准备工作</h2><ol><li>因为是部署集群，所以需要两台机器，(我使用的是digitalocean这个云提供商)</li><li>内存至少1.5GB 以上，不然会安装失败。</li><li>需要每一台机器都能 ping 通</li></ol><h2 id=我的一些配置>我的一些配置</h2><ol><li>系统为 centos7</li><li>节点的信息
<em>这里使用digitalocean提供的内网地址</em></li></ol><h2 id=准备安装>准备安装</h2><ol><li><p>修改主节点的 hosts 文件，把节点ip 和名字写进去
<code>vi /etc/hosts</code></p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><pre tabindex=0><code>10.132.37.154 master
10.132.45.167 node1</code></pre></div></li><li><p>所有节点无密码登录</p><ol><li>生成无密码的密钥对，用来进行主节点到副节点之间的无密码登录。
直接全都回车，生成的密钥对在 ~/.ssh 目录下面，默认名称为 <code>id_rsa</code>和<code>id_rsa.pub</code><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh-keygen</span></span></code></pre></div></div></li><li>把公钥分别写到主节点和副节点的<code>~/.ssh/authorized_keys</code> 文件中。
<em>注意：每个节点都有添加这个公钥，不管是本机还是其他机器</em></li></ol><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 先查看 id_rsa.pub 内容，复制出来，贴贴到 authorized_keys文件的最末尾</span>
</span></span><span class=line><span class=cl>cat ~/.ssh/id_rsa.pub
</span></span><span class=line><span class=cl><span class=c1># 贴到末尾</span>
</span></span><span class=line><span class=cl>vi ~/.ssh/authorized_keys</span></span></code></pre></div></div></li><li><p>在主节点安装pip</p></div><div class=post-footer><a href=/posts/%E4%BD%BF%E7%94%A8kubespray%E9%83%A8%E7%BD%B2kubernetes%E9%9B%86%E7%BE%A4/>阅读全文</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/liquibase-%E8%B8%A9%E5%9D%91%E8%AE%B0/>liquibase 踩坑记</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>陈</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-11-28>2017-11-28</time></span></div><div class=content><h1 id=liquibase-踩坑记>liquibase 踩坑记</h1><p>liquibase 是跨多种数据库平台的数据库迁移和初始化工具，但是在迁移到其它数据库平台的时候会遇到各种字段类型不一致导致出错。由于我使用的是 SpringBoot 和 hibernate，并且在 hibernate 初始化的时候打开了 validate，所以从不同数据库迁移会出问题。</p><h3 id=uuid-出错的问题>uuid 出错的问题</h3><p>当在 hibernate 里面使用了 uuid 的时候，在postgresql 里面是正常的，但是在使用 MySQL 的时候 hibernate 会报一下错误<code>found [char (Types#CHAR)], but expecting [binary(255) (Types#BINARY)]</code> ，所以需要 liquibase 里面写上以下配置。</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-xml"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!--  uuid 类型的定义  --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;type.uuid&#34;</span> <span class=na>value=</span><span class=s>&#34;RAW(16)&#34;</span> <span class=na>dbms=</span><span class=s>&#34;oracle&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;type.uuid&#34;</span> <span class=na>value=</span><span class=s>&#34;UUID&#34;</span> <span class=na>dbms=</span><span class=s>&#34;h2&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;type.uuid&#34;</span> <span class=na>value=</span><span class=s>&#34;UNIQUEIDENTIFIER&#34;</span> <span class=na>dbms=</span><span class=s>&#34;mssql&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;type.uuid&#34;</span> <span class=na>value=</span><span class=s>&#34;BINARY(16)&#34;</span> <span class=na>dbms=</span><span class=s>&#34;mysql&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;type.uuid&#34;</span> <span class=na>value=</span><span class=s>&#34;uuid&#34;</span> <span class=na>dbms=</span><span class=s>&#34;postgresql&#34;</span><span class=nt>/&gt;</span></span></span></code></pre></div></div><p>然后修改 liquibase uuid 的 column 节点配置</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-xml"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!--  把之前的 type=&#34;uuid&#34; 改为 ${type.uuid}  --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;column</span> <span class=na>name=</span><span class=s>&#34;id&#34;</span> <span class=na>remarks=</span><span class=s>&#34;ID&#34;</span> <span class=na>type=</span><span class=s>&#34;${type.uuid}&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/column&gt;</span></span></span></code></pre></div></div><p>以上配置只支持 oracle,h2,mssql,mysql,postgresql，如需要其他数据库请根据下面的类型对应表查找liquibase 对应数据库的类型</p></div><div class=post-footer><a href=/posts/liquibase-%E8%B8%A9%E5%9D%91%E8%AE%B0/>阅读全文</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/%E8%A7%A3%E5%86%B3kubespray%E5%AE%89%E8%A3%85k8s%E9%9B%86%E7%BE%A4%E7%9A%84check-certs-set-sync-certs-to-true-%E9%94%99%E8%AF%AF/>解决kubespray 安装 k8s 集群的Check_certs | Set 'sync_certs' to true' 错误</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>陈</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-11-28>2017-11-28</time></span></div><div class=content><p>在 kubespray 的 issue 上看到的Failed Kargo deploy at &rsquo;etcd : Check_certs | Set &lsquo;sync_certs&rsquo; to true&rsquo;</p><h2 id=解决方法>解决方法</h2><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-chevron-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yum -y install python-pip
</span></span><span class=line><span class=cl>pip install https://pypi.python.org/packages/2.7/J/Jinja2/Jinja2-2.8-py2.py3-none-any.whl</span></span></code></pre></div></div></div><div class=post-footer><a href=/posts/%E8%A7%A3%E5%86%B3kubespray%E5%AE%89%E8%A3%85k8s%E9%9B%86%E7%BE%A4%E7%9A%84check-certs-set-sync-certs-to-true-%E9%94%99%E8%AF%AF/>阅读全文</a></div></article><ul class=pagination><li class=page-item><span class=page-link><a href=/>1</a></span></li><li class=page-item><span class=page-link><a href=/page/2/>2</a></span></li><li class="page-item active"><span class=page-link><a href=/page/3/>3</a></span></li><li class=page-item><span class=page-link><a href=/page/4/>4</a></span></li><li class=page-item><span class=page-link><a href=/page/5/>5</a></span></li></ul></div></div></main><footer class=footer><div class=footer-container><div class=footer-line><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2592788502290192" crossorigin=anonymous></script></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>陈</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script>window.config=null</script><script src=/js/theme.min.js></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7EER0471GM")}</script><script src="https://www.googletagmanager.com/gtag/js?id=G-7EER0471GM" async></script></body></html>